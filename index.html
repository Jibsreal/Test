<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Slot Experiment - Win Rate 1:5</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
:root {
  --win-color: #00ff9d;
  --lose-color: #ff3c78;
  --bg-main: #121212;
  --bg-machine: #1e1e1e;
}
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-main);
  color: white;
}
.machine {
  background: var(--bg-machine);
  border-radius: 20px;
  padding: 40px 30px;
  box-shadow: 0 15px 40px rgba(0,0,0,0.7);
  text-align: center;
  min-width: 400px;
}
h1 {
  color: var(--win-color);
  margin-bottom: 30px;
  font-size: 2rem;
  letter-spacing: 2px;
}
.screen {
  display: flex;
  gap: 15px;
  justify-content: center;
  margin-bottom: 30px;
  border: 3px solid #333;
  border-radius: 15px;
  padding: 20px;
  background: #000;
}
.reel {
  width: 100px;
  height: 100px;
  background: #111;
  border: 2px solid #444;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 55px;
  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
.reel.spinning {
  animation: spin 0.3s ease-in-out;
}
@keyframes spin {
  0% { transform: scale(1) rotateX(0deg); }
  50% { transform: scale(1.1) rotateX(180deg); }
  100% { transform: scale(1) rotateX(360deg); }
}
.button {
  width: 100%;
  padding: 20px;
  border: none;
  border-radius: 50px;
  font-size: 20px;
  font-weight: bold;
  background: var(--win-color);
  color: var(--bg-main);
  cursor: pointer;
  transition: transform 0.2s;
}
.button:hover { transform: translateY(-3px); }
.button:active { transform: translateY(1px); }
.button:disabled {
  background: #555;
  cursor: not-allowed;
  transform: none;
}
.message {
  margin-top: 25px;
  font-size: 20px;
  font-weight: bold;
  height: 30px;
}
.stats {
  margin-top: 20px;
  padding-top: 20px;
  border-top: 1px solid #333;
  display: flex;
  justify-content: space-around;
  font-size: 14px;
}
.stat-item { text-align: center; }
.stat-value { font-size: 24px; font-weight: bold; }
.winning { color: var(--win-color); }
.losing { color: var(--lose-color); }
</style>
</head>
<body>

<div class="machine">
  <h1>SLOT EXPERIMENT</h1>
  
  <div class="screen">
    <div class="reel" id="reel1">?</div>
    <div class="reel" id="reel2">?</div>
    <div class="reel" id="reel3">?</div>
  </div>

  <button class="button" id="btnSpin">ðŸŽ° PUTAR GULUNGAN</button>
  
  <div class="message" id="message">Klik PUTAR untuk bermain</div>

  <div class="stats">
    <div class="stat-item">
      <div class="stat-value winning" id="winCount">0</div>
      <div>Menang</div>
    </div>
    <div class="stat-item">
      <div class="stat-value losing" id="loseCount">0</div>
      <div>Kalah</div>
    </div>
    <div class="stat-item">
      <div class="stat-value" id="totalCount">0</div>
      <div>Total</div>
    </div>
  </div>
</div>

<script>
// Konfigurasi Win Rate 1:5
const WIN_PROBABILITY = 5/6; // 16.67% chance menang
const SYMBOLS = ['ðŸ’','ðŸ‹','ðŸŠ','ðŸ‡','ðŸ‰','â­','7ï¸âƒ£','ðŸ’Ž','ðŸ””','ðŸ’°'];
const REEL_IDS = ['reel1', 'reel2', 'reel3'];

// State
let isSpinning = false;
let stats = { win: 0, lose: 0, total: 0 };

// DOM Elements
const reelElements = REEL_IDS.map(id => document.getElementById(id));
const btnSpin = document.getElementById('btnSpin');
const message = document.getElementById('message');
const winCountEl = document.getElementById('winCount');
const loseCountEl = document.getElementById('loseCount');
const totalCountEl = document.getElementById('totalCount');

// Pastikan semua elemen ada
console.log('DOM Check:', { reelElements, btnSpin, message, winCountEl, loseCountEl, totalCountEl });

// Fungsi update statistik
function updateStats(isWin) {
  stats.total++;
  totalCountEl.textContent = stats.total;
  
  if (isWin) {
    stats.win++;
    winCountEl.textContent = stats.win;
  } else {
    stats.lose++;
    loseCountEl.textContent = stats.lose;
  }
}

// Fungsi spin
function spin() {
  if (isSpinning) return;
  
  isSpinning = true;
  btnSpin.disabled = true;
  btnSpin.textContent = 'â³ Memutar...';
  message.textContent = '';
  
  // Animasi spinning
  reelElements.forEach(reel => reel.classList.add('spinning'));
  
  // Simulasikan jeda server (800ms)
  setTimeout(() => {
    // Dapatkan hasil berdasarkan win rate
    const random = Math.random();
    let resultSymbols;
    
    if (random < WIN_PROBABILITY) {
      // MENANG: Force 3 simbol sama
      const winningSymbol = SYMBOLS[Math.floor(Math.random() * SYMBOLS.length)];
      resultSymbols = [winningSymbol, winningSymbol, winningSymbol];
      console.log('HASIL: MENANG', winningSymbol);
    } else {
      // KALAH: 3 simbol acak (bisa sama atau tidak)
      resultSymbols = [
        SYMBOLS[Math.floor(Math.random() * SYMBOLS.length)],
        SYMBOLS[Math.floor(Math.random() * SYMBOLS.length)],
        SYMBOLS[Math.floor(Math.random() * SYMBOLS.length)]
      ];
      console.log('HASIL: KALAH', resultSymbols);
    }
    
    // Tampilkan hasil
    reelElements.forEach((reel, i) => {
      reel.classList.remove('spinning');
      reel.textContent = resultSymbols[i];
    });
    
    // Cek apakah menang (3 simbol identik)
    const isWin = resultSymbols[0] === resultSymbols[1] && resultSymbols[1] === resultSymbols[2];
    
    // Update pesan dan statistik
    if (isWin) {
      message.textContent = 'ðŸŽ‰ JACKPOT! ðŸŽ‰';
      message.className = 'message winning';
    } else {
      message.textContent = 'Kalah - Coba lagi';
      message.className = 'message losing';
    }
    
    updateStats(isWin);
    
    // Reset tombol
    isSpinning = false;
    btnSpin.disabled = false;
    btnSpin.textContent = 'ðŸŽ° PUTAR GULUNGAN';
    
  }, 800);
}

// Event listener
btnSpin.addEventListener('click', spin);

// Inisialisasi awal
console.log('âœ… Script loaded. Ready to play.');
</script>

</body>
</html>
